<!DOCTYPE html>
{% load static %}
{% load django_bootstrap5 %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex,nofollow">
    <title>{% block title %}Dentalstore{% endblock %}</title>
    <link rel="stylesheet icon" href="{% static '/app/images/favicon.ico' %}">
    {% bootstrap_css %}
    <link rel="stylesheet" href="{% static '/app/css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static '/app/css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static '/app/css/style.css' %}">
    {% bootstrap_javascript %}
</head>
<body>
    <div class="page-wrapper d-flex min-vh-100 flex-column overflow-hidden">


<!--header-->
<header class="p-2 border-bottom header">
    <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light">
<!--      <div class="container">-->
        <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 link-body-emphasis text-decoration-none">
            <img class="logo-img" src="{% static '/app/images/svglogo.svg' %}">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Переключатель навигации">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav col-12 col-xl-9 col-lg-8 justify-content-lg-evenly mb-2 mb-lg-0 align-items-center align-self-lg-end">
            <a class="nav-link active" aria-current="page" href="{% url 'home' %}">Главная</a>
            <a class="nav-link" href="{% url 'catalog' %}">Каталог</a>
            <a class="nav-link" href="{% url 'delivery' %}">Доставка и оплата</a>
            <a class="nav-link" href="{% url 'contacts' %}">Контакты</a>
           </div>
           <div class="navbar-nav col-12 col-xl-1 col-lg-1 align-self-lg-end justify-content-xl-center justify-content-lg-end">
            <div class="cart col-12 col-lg-2 d-flex justify-content-center">
              {% with total_items=cart|length %}
              <a href="{% url 'cart:cart_detail' %}">
                  <div class="text-center count-cart">{% if cart|length > 0 %}{{ total_items }}{% endif %}</div>
                  <img class="pb-2" src="{% static '/app/images/shopping-cart.png' %}" alt='Корзина'>
              </a>
              {% endwith %}
            </div>
               </div>
               <div class="navbar-nav col-12 col-xl-2 col-lg-3 align-self-lg-end  justify-content-lg-end">
            <div class="header-contacts text-center">
                <div class="link-phone">
                    <a href="tel:+79999683506">+7 (999) 968-35-06</a>
                </div>
                <div class="link-messangers d-flex justify-content-center">
                    <a  href="https://t.me/+79999683506" class="telegram-link"><img class="link-messangers-item p-2" src="{% static '/app/images/telegram.png' %}" alt="Написать в Telegram"></a>
                    <a href="https://wa.me/+79999683506" class="whatsapp-link"><img class="link-messangers-item p-2" src="{% static '/app/images/whatsapp.png' %}" alt="Написать в Whatsapp"></a>
                </div>
            </div>
          </div>
        </div>
<!--      </div>-->
    </nav>
        <form action="search">
            <input type="text" id="string-search" placeholder="search"/><input type="button" id="btn-search" value="Поиск"/>
        </form>
    </div>
    </header>


<!--header end-->
    {% block breadcrumb %}
    {% endblock %}

    {% block content %}
    {% endblock %}


<footer class="footer">
<div class="container">
<div class="row justify-content-center">
<div class="col-md-12 text-center">
<h2 class="footer-heading my-5 "><a href="/" class="d-flex align-items-center justify-content-center mb-lg-0 link-body-emphasis text-decoration-none">
                    <img class="logo-img" src="{% static '/app/images/svglogo.svg' %}">
                </a>
</h2>
<div class="row footer-menu d-flex w-xl-100">
<ul class="d-flex w-xl-30 flex-column align-items-start col-lg-auto me-lg-auto mb-xl-2 mb-3 mb-md-3 mb-xl-0 col-12 col-md-6">
    <li><a href="{% url 'home' %}" class="nav-link px-xl-2 link-secondary">Главная</a></li>
    <li><a href="{% url 'catalog' %}" class="nav-link px-xl-2 link-body-emphasis">Каталог</a></li>
    <li><a href="{% url 'delivery' %}" class="nav-link px-xl-2 link-body-emphasis">Доставка и оплата</a></li>
    <li><a href="{% url 'contacts' %}" class="nav-link px-xl-2 link-body-emphasis">Контакты</a></li>
</ul>
<ul class="footer-social d-flex flex-column w-xl-30 align-items-start col-lg-auto me-lg-auto mb-xl-2 mb-3 mb-md-3 mb-xl-0 col-12 col-md-6">
    <li><div class="footer-link-phone"><a href="tel:+79999683506" class="link-body-emphasis nav-link p-xl-2 ">+7 (999) 968-35-06</a></div></li>
    <li><a  href="https://t.me/+79999683506" class="telegram-link nav-link px-xl-2  link-body-emphasis">Telegram</a></li>
    <li><a href="https://wa.me/+79999683506" class="whatsapp-link nav-link px-xl-2  link-body-emphasis">Whatsapp</a></li>
</ul>
<ul class="footer-social d-flex flex-column w-xl-50 align-items-start col-lg-auto me-lg-auto mb-2 mb-md-0 col-12">
    <li><h6 class="h6 mb-0">Мы находимся по адресу:</h6></li>
    <li><div class="font-weight-normal text-start">МО, г. Реутов, Юбилейный проспект дом 66</div></li>
</ul>
</div>

</div>
</div>
<div class="row mt-5">
<div class="col-md-12 text-center">
<p class="copyright">
© Copyright  2023
</p>
</div>
</div>
</div>
</footer>
    </div>
<script src="{% static 'static_jquery/js/jquery.js' %}"></script>
<script src="{% static '/app/js/owl.carousel.min.js' %}"></script>
<script src="{% static '/app/js/main.js' %}"></script>
<script>
getProductsContainer = () => {
    let container = document.getElementById('products')
    if (container !== null) {
        $("#products").empty()
        return $("#products")
    }
    container = document.createElement('ul')
    container.classList.add('row', 'px-0', 'products-catalog-category-list');
    container.id = 'products';
    parentContainer = document.querySelector("body > div > div") || document.querySelector("body > div > main")
    // if (document.getElementsByClassName('main') && document.getElementsByClassName('main')[0]) {
        // parentContainer = document.getElementsByClassName('main')[0]
    if (parentContainer) {
        parentContainer.innerHTML = ''
        parentContainer.appendChild(container)
        return $("#products")
    }
}

$( document ).ready(function() {

$('#btn-search').click(function(){
        $.ajax({
            url: `{% url 'product_search' %}`,
            type: 'GET',
            data: {q: $("#string-search").val()},
            dataType: 'json',
            success: function(response) {
                console.log('success', response)
                products = getProductsContainer()
                for (let i = 0; i < response.results.length; i++) {
                    product = response.results[i]
                    products.append(`{% include 'catalog/products.html' with title="${product.title}" manufacturer="${product.manufacturer.name}" manufacturer_countries="${product.manufacturer_countries}" price="${product.price}" stock="${product.stock}" sale_price="${product.sale_price}" currency="${product.currency}" availability="${product.availability}" sku="${product.sku}" image="${product.gallery_images[0].image}" alt="${product.gallery_images[0].alt}" slug="${product.slug}" id="${product.id}" in_cart="${product.in_cart}" %}`)
                }
            },
            error: function(response) {
                console.log('err', response)
            }
        })
    })
})
</script>
</body>
</html>